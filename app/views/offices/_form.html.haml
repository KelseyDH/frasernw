= simple_nested_form_for @office, :html => { :class => "form-horizontal ajax" } do |f|
  - if not f.error_messages.blank?
    .alert.alert-error= f.error_messages

  = f.simple_fields_for :location do |l|
    .control-group
      %label Location is
      .controls
        - location = @office.location
        - location_class = "location_0"
        - is_in_hospital = location.in_hospital?
        - is_in_clinic = !is_in_hospital && location.in_clinic?
        - is_stand_alone = !is_in_clinic && !is_in_hospital
        - [['Standalone', is_stand_alone], ['In a clinic', is_in_clinic], ['In a hospital', is_in_hospital]].each do |option| 
          = label_tag "#{location_class}_#{option.first}", "#{radio_button_tag(location_class, option.first, option.second, :class => location_class)} #{option.first}".html_safe
    .address_0
      = l.simple_fields_for :address do |a|
        = a.input :suite
        = a.input :address1
        = a.input :address2
        = a.association :city, as: :select, collection: City.all.map { |c| ["#{c.name}, #{c.province.symbol}", c.id] }, :include_blank => true
        = a.input :postalcode
    .hospital_0
      = l.association :hospital_in, as: :select, collection: Hospital.all, :include_blank => true
    .clinic_0
      = l.association :clinic_in, as: :select, collection: @specializations_clinics, :include_blank => true
    .details_0
      = l.input :suite_in
      = l.input :details_in
    %script{"type" => "text/javascript"}
      :plain
        $(document).ready( address_0_location_changed );

  .form-actions
    = f.button :submit, :class => "btn btn-primary"
    = link_to 'Cancel', offices_path, :class => "btn btn-danger ajax"