/ - title "Area of Practice"

%h1= "#{@procedure.name}"
%h2= @procedure.procedure_specializations.collect(){ |ps| compressed_ancestry(ps) }.join(", ")

%table{:class => 'tablesorter {sortlist: [[2,0],[3,0]]}', :id => 'specialist_table'}
  %thead
    %tr
      %th Name
      %th{:class => "{sorter: 'waittime'}"} Lag
      %th{:class => "{sorter: 'waittime'}"} Wait
      %th City
      %th Hospital
      %th Clinics
  %tbody
    - (@procedure.specialists + @procedure.clinics).each do |specialist|
      %tr
        %td{:class => "name_column"}
          - type_of_row = specialist.class.to_s.downcase
          - case type_of_row
            - when 'specialist'
              = link_to specialist.name, specialist_path(specialist), :class => type_of_row
            - when 'clinic'
              = link_to specialist.name, clinic_path(specialist), :class => type_of_row
        %td{:class => "number_column"}= specialist.lagtime
        %td{:class => "number_column"}= specialist.waittime
        %td= specialist.addresses.first ? specialist.addresses.first.city : ""
        %td= compressed_clinics(specialist.hospitals) if type_of_row == 'specialist'
        %td= compressed_clinics(specialist.clinics) if type_of_row == 'specialist'

%p
  = link_to "Edit area of practice", edit_procedure_path
  |
  = link_to "Delete area of practice", @procedure, :confirm => "Delete #{@procedure.name}?", :method => :delete
  |
  = link_to "View all areas of practice", procedures_path
