/ FIXME - form target needs to change based on who is accessing it

= simple_form_for @specialist do |f|
  = f.error_messages
  - if @view
    .error_messages
      %h2 You are editing your record in the Fraser NW Division of Family Practice Resource database
      %p This database exists to make make our practices, and your practice more efficient. By providing the information requested below you are making it easier for family doctors to find your practice, ensure that they are providing you with the correct information, and that your scopes of practice are fully understood.
  
  - if current_user && current_user.admin?    
    .error_messages
      %h2 Edit contact information to allow specialists to edit their own forms - this information is only visible to admins.
      = f.input :contact_name
      = f.input :contact_email
      = f.input :contact_phone
      = f.input :contact_notes, hint: 'Is this an MOA, or someone else in the office? anything else we should know.'

  = f.input :firstname
  = f.input :lastname
  = f.input :address1, label: "Address line 1"
  = f.input :address2, label: "Address line 2"
  = f.input :city
  = f.input :province
  = f.input :postalcode, label: "Postal Code"
  = f.input :phone1, label: "Phone"
  = f.input :direct_phone, label: "Direct phone"
  = f.input :fax
  = f.input :responds_via, as: :text, hint: "How does the Dr. respond to referral requests (phone to GP office, fax to GP office, phone to patient, other...)"
  = f.input :status, as: :text
  = f.input :referral_criteria, as: :text, hint: "Criteria for referral, what forms and investigations are required for referrals for different procedures"
  = f.input :interest, as: :text
  = f.input :red_flags, as: :text, hint: "Red Flag (urgent situations, and process for having them addressed)"
  = f.input :waittime, label: "Wait time", hint: "(avg in weeks)", as: :integer, min: 0

  = f.input :clinics do
    = f.select(:clinic_ids, options_for_select(@specialization_clinics, @specialist_clinics), {:include_blank => false, :id => "specialist_clinics"}, {:multiple => true, :size => 10})

  %p
    = f.label :procedures, "Scope of practice"
    %br
    - @specialist.specialization.procedures.where(:done_by_specialists => true).each do |procedure|
      %br
      = check_box_tag :procedure_ids, procedure.id, @specialist.procedures.include?(procedure), :name => 'specialist[procedure_ids][]'
      = label_tag :procedure_ids, procedure.name

  / FIXME - This shouldn't be in the view. Should be set by parent resource in controller.
  %p
    = f.input :specialization_id, as: :hidden

    = f.submit
