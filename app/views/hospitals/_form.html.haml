= simple_nested_form_for @hospital do |f|
  = f.error_messages

  %fieldset
    %h2 
      Hospital Name 
    = f.input :name

  %fieldset.address
    %h2 Hospital Contact Information
    - address_number = 1
    = f.simple_fields_for :addresses do |i|
      %h4.location_header 
        Location 
        = address_number
      = i.input :phone1
      = i.input :fax
      = i.input :suite
      = i.input :address1
      = i.input :address2
      = i.association :city, as: :select, collection: City.all(:order => "name ASC").map { |c| ["#{c.name}, #{c.province.symbol}", c.id] }, :include_blank => true
      = i.input :postalcode
      - if address_number < Hospital::MAX_ADDRESSES
        %hr
      - address_number += 1
    - if @hospital.addresses.count < Hospital::MAX_ADDRESSES
      = f.link_to_add "Add another location", :addresses, class: "button", id: "add_address"

  %p
    = f.submit
