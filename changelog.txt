# Change Log
All notable changes to this project will be documented in this file.  In the future, this project may adhere to Semantic Versioning.

CR = Change Request item
Local-only = Changes not reflected in Source Code
Backend = Change is not user facing

## [2016-01-23] [Since 2016-01-16 Integration]


## [2016-01-16] [Since 2016-01-09 Integration]
### Changed:
- #154: Clinic form now asks users to confirm before deleting location
- #283: Improved results sorting on specialization pages
- #50: Browse 'More' latest updates

### Fixed:
- #251: Quick sharing/unsharing content items from their show page
- Recache tasks now fail individually and send error messages to our emails
- We are notified via email when the recache begins
- Latest Updates to office openings are shown even if the office hasn't opened
recently

## [2016-01-09] [Since 2016-01-02 Integration]
### Added:
- Finish CR (#276): Add GP-like suffix labels to Nurse Practitioners (Nurse), Midwives (Midwife), and Internal Medicine (Int Med) specialties in filter table.

### Changed:
- System Notification recipients are now notified if a deceased specialist is deleted from the database.
- Improved css hover effects on front page for: Specialties / Featured Content
- Search box now tells browsers to disable autocomplete
- Security updates

### Fixed:
- #275:  Fixed problem preventing newly retired specialists from showing up in the Latest Specialists and Clinic updates news feed.
- #272: Fixed 'y2k' date bug with CSV Usage Reports that made old months not display correctly when a new year rolls over.
- Fix spacing issues with 'Specialities' dropdown when viewport is narrowed.

## [2016-01-02] [Since 2015-12-26 Integration]
### Changed:
- Change default behaviour for access keys so that sign ups for deactivated accounts do not work, and instead send a message to the person telling them to contact an administrator to reactive their account instead.
- Update tooltips for User index page to allow mouseover for a wider area.
- Update production, test and development deploy scripts to have clearer console outputs.

## [2015-12-26] [Since 2015-12-19 Integration]
### Changed:
- Finish CR: Add a date stamp of when users last visited Pathways to the admin Users table

### Fixed:
- Fix typos in Terms of Use

## [2015-12-19] [Since 2015-12-12 Integration]
### Added:
- Backend: script to create and manage integration branch

### Fixed:
- #253: We no longer ignore clinic locations and specialist offices that have
opened recently but had no data previous to the latest update
- Change S3 to use different buckets per environment, so we can modify
uploaded files on `test` and `local`

## [2015-10-30] [Since October 26, 2015 User Update]
### Added:
- New security feature to prevent brute force login attempts from botnets

### Changed:
- Add "No Cities" bulk deselect option for the City filter on the Specialities page
- New icons added to top navbar
- New caching and performance optimizations:
  - Home page now ~100ms faster
  - users/index: ~14000 ms improvement (yes really...)
  - New servers with 2x faster mean and 95th percentile response times

### Fixed:
- Fix broken specialist icon

### Removed:
- Remove incorrect resources data from reporting.


## [2015-10-26] [Since September 21, 2015 User Update]
### Added:
- History for Referral Forms on specialist and clinic pages
- Added dynamic table sorting to Owned Content Items & Shared Content Items For datatables
- Major updates to Reporting:
  - New dashboard interface
  - Export to CSV option added
  - Added new graph interface to show Google Analytics Page Views and Session data by division.
  - Support for division admins to see reports
  - Add Print view
- New status option for deceased Specialists
- Newsletter section on home page

### Changed:
- Reporting section now supports export to CSV via email
- Finish Change Request: Add "Accepting limited referrals" to Clinics
- Finish Change Request: Add "Deceased" to Specialists
- Updated Subscription notification email wording


### Fixed:
- Fix CSS display problems in Owned Content Items / Shared Content Items For tables

### Removed:
- Remove tracking of "Inline Files" from Notifications



## [2015-09-21] [Since May 08, 2015 User Update]

### Added:
- Added History button to clinic/index
- Add papertrail to users & content items

### Changed:
- Significant improvements to page load speeds by optimizing queries on various pages.  Measured improvements:
  - specialists/index: ~ 1000 ms improvement
  - clinics/index: ~ 1000 ms improvement
  - specialists/form: ~ 22000 ms improvement
  - clinics/form: ~ 1100 ms improvement
  - referral_forms/index: ~ 5000 ms improvement
- Upgrade Ruby on Rails framework version to 3.2.22 (from 3.2.21)
- Major refactor of many modules to new services
- Updates to versioning and papertrail logic
- Updated Specialty Comment box labels
- Office index page now has dynamic table sorting
- Updates to caching:
  - To prevent one-off cache key collisions, the plucked sum of object ids is now used to generate some Model level cache keys
  - Moved recaching logic directly into ruby tasks, away from page based fragment cache building

### Fixed:
- CR: 'Physicians who see patients' heading now only appears when there
are actually physicians attending
- Removing all areas of practice from a specialist now works.
- Hide object data attributes recorded by Papertrail from showing up in Administrator Review Queue
- Fix typo in routes causing recache of languages to fail
- Fix bug in table headers
- Fix issue with capacities




## [2015-06-08] [Since April 27, 2015 User Update]

### Added:
- CR:  Added support for custom labels so that specialties can be referred to with names other than "Specialist" (e.g. Nurse Practitioners, Midwives, Family Physician).
- CR, Local-only:  Purchased SSL Certificate, added SSL (https://), all requests are now encrypted and redirect to https://pathwaysbc.ca.
- ENV["FORCE_SSL"] can be set to "true" or "false" as an environment variable to enable or disable SSL.
- CR:  Added major upgrade to analytics system; CSV report tools now allow fetching comprehensive division-specific usage analytics and entity metrics.
- Added a heartbeat loading animation in between periods where a user is waiting for their browser to render HTML.
- Add indexes and update database queries for content items (providing a measured ~150ms boost to page speed loads).
- CR: notes for review items, feedback items, content items, referral forms, users, clinics, and specialists
- CR: history for review items, feedback items, content items, referral forms, and users
- If a 1000 class error occurs, Cloudflare now serves a notice to go directly
to our heroku address
- System notification sent when recache is successful

### Changed
- Renamed "Areas of Practice" to "Accepts Referrals For" where appropriate.
- Specialty pages now load much faster (~1 to ~2 seconds) due to replacing hide/show table filtering with a table filtering system that destroys/recreates table rows on each filter.
- User edit form now warns admins if a user is missing a division.
- Upgrade to Rails 3.2 now fully complete.
- Local-only: Added browser caching via Cloudflare CDN to increase page loading speeds.
- Local-only:  Moved DNS lookup server to fault tolerant Cloudflare to prevent emergency downtimes (e.g. if a major earthquake hits local servers).
- Rename "In Progress" Speciality edit checkbox to "In Progress / Hidden"
- Moved open-source Github repository to "pathwaysmedical" from "warneboldt"
- CR: Address and specialization fields are now replaced with comment boxes when user edit clinics and specializations
- history for Clinics and Specialists now includes their review and feedback items
- migrate joint injection hierarchy to nest <body_part> under "Joint Injection"
- borrowable resources now sorted automatically by division

### Fixed
- CR:  Clinic location/specialist office rearranging issue now fixed.
- "Latest Specialists and Clinics Updates" now hides specialists/clinics updates if the specialty and city of the clinic/specialist does not match with the local referral area of the Division for that specialty.
- User edit form now correctly places users into divisions.
- User edit form now disables HTML autocomplete.
- On Division edit pages, Internet Explorer browsers now correctly render specialty/city checkboxes in the local referral area table.
- Content Item pages now cache correctly so that different versions of the page are shown for admins and users.
- Referral form feedback button now disables during submission to prevent duplicate submissions.
- Error on referral form update
- Correct version of specialist office now used in specialist and clinic updates
- S3 uses SSL to serve attachment
- Can enter addresses for new specialist offices
- Divisional search data no longer browser cached
- Updating capacities and focuses for specialists and clinics with more than one
specialty
- Removing all areas of practice from specialists and clinics
- System notification recipients standardized and configurable via
environment variables
- timeouts on borrowable resources page

### Removed:
- Removed old reporting interface graphs from the codebase that were already disabled by earlier developers.
- Option to delete review item from index view.
